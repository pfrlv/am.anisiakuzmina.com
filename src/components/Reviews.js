import { useState } from "react";
import { motion, AnimatePresence } from "framer-motion";
import { Masonry } from "react-plock";
import { Marquee } from "@devnomic/marquee";

const SLIDES = [
  {
    text: `Искренне благодарю за возможность познакомиться с истинным собой, внимательнее замечать жизнь, мир вокруг себя, обрести поддерживающее комьюнити и миллион новых идей. Стать увереннее, спокойнее, не бояться быть смешной, играть, угощать яблоком, прыгать в бассейн, если захочется. Обнимаю сердцем. Это было незабываемо, чутко, очень по-настоящему.`,
    title: "Катя",
  },
  {
    text: `Была в некотором тупике не только творческом, но и жизненном. Практикум дал возможность увидеть людей вокруг со схожими проблемами, появилось ощущение, что когда ты не один, то изменить ситуацию проще. Хочется возвращаться к практикам, связанным с изучением себя, удивительно простым в исполнении, но эффективным. Спасибо за возможность лучше увидеть себя, благодаря взаимодействию с другими людьми.`,
    title: "Ольга",
  },
  {
    text: `Для меня самое ценное это то, что я посмотрела на себя немного другими глазами. У меня очень сильный внутренний родитель, который иногда не дает даже шагу ступить. Но во время практикума удалось посмотреть с бОльшей заботой, интересом, теплом и вниманием.`,
    title: "Оля",
  },
  {
    text: `
      Я не могла быть перед камерой до практикума. Отчасти мне казалось, что и необходимости в этом особенной нет. Но внутри меня за время практикума растаял грандиозный ледник, и эти освобожденные воды напоили сад красоты моей души. Плоды этой красоты уже прорастают в отношениях с близкими, друзьями, коллегами и клиентами.
    `,
    title: "Алёна",
  },
  {
    text: `У меня появилось куча творческой энергии. Вера в себя и свое видение. Базовые навыки работы с телом.`,
    title: "Филипп",
  },
  {
    text: `Я стала чувствовать больше уверенности в себе, почувствовала право и опору на свое видение — до было больше критики, сомнений, сравнения с другими фотографами/художниками. еще я почувствовала себя менее одинокой, попав в наше замечательное комьюнити, где люди чувствуют и видят, могут понять и поддержать тебя.`,
    title: "Анико",
  },
  {
    text: `Я забираю знание, что ты не один. Что ты не особенный, но особенный. Что во мне уже все есть для того, чтобы быть творцом. Забираю веру в себя, которой у меня еще не было. Забираю любовь Анисии и ребят, возможность быть в контакте и делиться созиданием дальше. Практикум очень помогал мне возвращаться к себе в этот непростой месяц, вспоминать кто ты и про что ты, а еще узнавать себя заново, перепридумывать себя.`,
    title: "Катя",
  },
  {
    text: `Все, что было в лекциях, в ответах на вопросы, в ощущении от людей, от их переживаний — очень отзывается мне сейчас и принято в работу. Пожалуй, самое мое лучшее вложение в себя за последнее время. После практикума появилось более четкое видение пути. `,
    title: "Анна",
  },
  {
    text: `Я благодарна всей душой и телом за это время, проведенное вместе. Мне было хорошо, безопасно и полезно. Я еще раз убедилась, что за любым результатом стоит личность. И эту личность надо взращивать, напитывать и изучать, находить инструменты по взаимодействию с собой, миром. Огромная благодарность Анисии и всем причастным за этот курс, за горящие глаза и эмоции. За новый взгляд, за расширение границ, за новый опыт. Это интересно. Очень. Хоть порой и страшно. Но с такой поддержкой не страшно идти в этот страх.  Обнимаю!`,
    title: "Надежда",
  },
];

function PhotoStrip() {
  const imageCount = 20; // from 1 to 20
  const images = Array.from({ length: imageCount }, (_, i) => `/members/${i + 1}.jpg`);

  return (
    <div className="w-full overflow-hidden rounded-[2px]">
      <Marquee innerClassName="text-mlg md:text-lg uppercase cursor-default flex h-[250px] [--duration:75s] gap-[5px]"
        >
      {images.map((src, index) => (
          <img
            key={index}
            src={src}
            alt={`Участник ${index}`}
            style={{
              height: '100%',
              objectFit: 'cover', // or 'contain' if you want to avoid cropping
              flexShrink: 0,
            }}
          />
        ))}
        </Marquee>
    </div>
  );
}

const Item = ({ text, title }) => {
  return (
    <div className="text-[12px] leading-[18px]">
      <div
        className="text-black/65"
        dangerouslySetInnerHTML={{ __html: text }}
      />
      <div className="mt-[15px]">{title}</div>
    </div>
  );
};

export default function Reviews() {
  const [active, setActive] = useState(false);
  return (
    <div className="mx-[-10px]">
      <div className="md:w-10/12 xl:w-9/12 sm:ml-[8.333333%] px-[10px]">
        <h2 className="uppercase text-black mb-[30px]">
          Отзывы и работы участников <br />
          прошлого практикума
        </h2>
        <div className="relative">
          <motion.div
            layout
            animate={{ height: active ? "auto" : 300 }}
            initial={{ height: 300 }}
            className="h-[310px] overflow-hidden"
          >
            <Masonry
              items={SLIDES}
              config={{
                columns: [1, 2, 3, 4],
                gap: [10, 10, 20, 30],
                media: [640, 768, 1024, 1280],
              }}
              render={(props, index) => <Item key={index} {...props} />}
            />
          </motion.div>
          <AnimatePresence>
            {!active && (
              <motion.div
                exit={{ opacity: 0 }}
                onClick={() => setActive(!active)}
                className="gradi absolute h-[300px] flex items-end justify-center bottom-0 left-[-10px] right-[-10px] cursor-pointer group"
              >
                <div className="mb-[10px] group-hover:opacity-30">
                  Все отзывы
                </div>
              </motion.div>
            )}
          </AnimatePresence>
        </div>
      </div>
      <div className="pt-[50px]">
            <PhotoStrip />
      </div>
    </div>
  );
}
